!function(e){var r={};function o(l){if(r[l])return r[l].exports;var s=r[l]={i:l,l:!1,exports:{}};return e[l].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,r,l){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)o.d(l,s,function(r){return e[r]}.bind(null,s));return l},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="public",o(o.s=1)}([,function(e,r){function o(){var e=$("select[name=id_addresscustomertype] option:selected").val();if(void 0!==e){var r=!1;$.ajax({type:"GET",url:ajax_link,async:!1,dataType:"json",headers:{Accept:"application/json"},data:{id:e},success:function(e){e&&(r=e.need_invoice)}});var o=$("input[name=firstname]"),l=$("input[name=lastname]"),s=$("input[name=company]"),t=$("input[name=vat_number]"),n=$("input[name=sdi]"),u=$("input[name=pec]"),a=$("input[name=dni]");r?(o.prop("required",!1),o.closest(".form-group").hide(100),l.prop("required",!1),l.closest(".form-group").hide(100),s.closest(".form-group").show(100),s.prop("required",!0),s.closest(".form-group").find("label.form-control-label").hasClass("required")||s.closest(".form-group").find("label.form-control-label").addClass("required"),a.closest(".form-group").hide(100),s.closest(".form-group").find(".form-control-comment").html(""),t.closest(".form-group").show(100),t.prop("required",!0),t.closest(".form-group").find("label.form-control-label").hasClass("required")||t.closest(".form-group").find("label.form-control-label").addClass("required"),t.closest(".form-group").find(".form-control-comment").html(""),n.closest(".form-group").show(100),sdi_required&&(n.prop("required",!0),n.closest(".form-group").find("label.form-control-label").hasClass("required")||n.closest(".form-group").find("label.form-control-label").addClass("required"),n.closest(".form-group").find(".form-control-comment").html("")),u.closest(".form-group").show(100),pec_required&&(u.prop("required",!0),u.closest(".form-group").find("label.form-control-label").hasClass("required")||u.closest(".form-group").find("label.form-control-label").addClass("required"),u.closest(".form-group").find(".form-control-comment").html(""))):(o.prop("required",!0),o.closest(".form-group").show(100),l.prop("required",!0),l.closest(".form-group").show(100),s.closest(".form-group").hide(100),s.prop("required",!1),s.closest(".form-group").find("label.form-control-label").hasClass("required")&&s.closest(".form-group").find("label.form-control-label").removeClass("required"),a.closest(".form-group").show(100),t.closest(".form-group").hide(100),t.prop("required",!1),t.closest(".form-group").find("label.form-control-label").hasClass("required")&&t.closest(".form-group").find("label.form-control-label").removeClass("required"),n.closest(".form-group").hide(100),n.prop("required",!1),n.closest(".form-group").find("label.form-control-label").hasClass("required")&&n.closest(".form-group").find("label.form-control-label").removeClass("required"),u.closest(".form-group").hide(100),u.prop("required",!1),u.closest(".form-group").find("label.form-control-label").hasClass("required")&&u.closest(".form-group").find("label.form-control-label").removeClass("required"))}}
/**
 * Copyright since 2007 Carmine Di Gruttola
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to http://www.prestashop.com for more information.
 *
 *  @author    cdigruttola <c.digruttola@hotmail.it>
 *  @copyright Copyright since 2007 Carmine Di Gruttola
 *  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 *
 *
 */
$(document).ready((function(){o(),$("select[name=id_addresscustomertype]").change((function(e){e.preventDefault(),o()}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZnJvbnQvZnJvbnQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ0b2dnbGVDdXN0b21lclR5cGUiLCJjaGsiLCIkIiwidmFsIiwibmVlZF9pbnZvaWNlIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJhamF4X2xpbmsiLCJhc3luYyIsImRhdGFUeXBlIiwiaGVhZGVycyIsIkFjY2VwdCIsImRhdGEiLCJpZCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJvYmpfZmlyc3RfbmFtZSIsIm9ial9sYXN0X25hbWUiLCJvYmpfY29tcGFueSIsIm9ial92YXRfbnVtYmVyIiwib2JqX3NkaSIsIm9ial9wZWMiLCJvYmpfZG5pIiwicHJvcCIsImNsb3Nlc3QiLCJoaWRlIiwic2hvdyIsImZpbmQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiaHRtbCIsInNkaV9yZXF1aXJlZCIsInBlY19yZXF1aXJlZCIsInJlbW92ZUNsYXNzIiwiZG9jdW1lbnQiLCJyZWFkeSIsImNoYW5nZSIsImUiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFP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LEdBQzVCSixFQUFlSyxRQUFRLGVBQWVHLEtBQUssNEJBQTRCQyxTQUFTLGFBQ2hGVCxFQUFlSyxRQUFRLGVBQWVHLEtBQUssNEJBQTRCTSxZQUFZLFlBRXZGYixFQUFRSSxRQUFRLGVBQWVDLEtBQUssS0FDcENMLEVBQVFHLEtBQUssWUFBWSxHQUNyQkgsRUFBUUksUUFBUSxlQUFlRyxLQUFLLDRCQUE0QkMsU0FBUyxhQUN6RVIsRUFBUUksUUFBUSxlQUFlRyxLQUFLLDRCQUE0Qk0sWUFBWSxZQUVoRlosRUFBUUcsUUFBUSxlQUFlQyxLQUFLLEtBQ3BDSixFQUFRRSxLQUFLLFlBQVksR0FDckJGLEVBQVFHLFFBQVEsZUFBZUcsS0FBSyw0QkFBNEJDLFNBQVMsYUFDekVQLEVBQVFHLFFBQVEsZUFBZUcsS0FBSyw0QkFBNEJNLFlBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdkc1RmhDLEVBQUVpQyxVQUFVQyxPQUFNLFdBQ2RwQyxJQUVBRSxFQUFFLHVDQUF1Q21DLFFBQU8sU0FBVUMsR0FDdERBLEVBQUVDLGlCQUNGdkMiLCJmaWxlIjoiZnJvbnQuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJwdWJsaWNcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgc2luY2UgMjAwNyBDYXJtaW5lIERpIEdydXR0b2xhXG4gKlxuICogTk9USUNFIE9GIExJQ0VOU0VcbiAqXG4gKiBUaGlzIHNvdXJjZSBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIEFjYWRlbWljIEZyZWUgTGljZW5zZSAoQUZMIDMuMClcbiAqIHRoYXQgaXMgYnVuZGxlZCB3aXRoIHRoaXMgcGFja2FnZSBpbiB0aGUgZmlsZSBMSUNFTlNFLnR4dC5cbiAqIEl0IGlzIGFsc28gYXZhaWxhYmxlIHRocm91Z2ggdGhlIHdvcmxkLXdpZGUtd2ViIGF0IHRoaXMgVVJMOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL2FmbC0zLjAucGhwXG4gKiBJZiB5b3UgZGlkIG5vdCByZWNlaXZlIGEgY29weSBvZiB0aGUgbGljZW5zZSBhbmQgYXJlIHVuYWJsZSB0b1xuICogb2J0YWluIGl0IHRocm91Z2ggdGhlIHdvcmxkLXdpZGUtd2ViLCBwbGVhc2Ugc2VuZCBhbiBlbWFpbFxuICogdG8gbGljZW5zZUBwcmVzdGFzaG9wLmNvbSBzbyB3ZSBjYW4gc2VuZCB5b3UgYSBjb3B5IGltbWVkaWF0ZWx5LlxuICpcbiAqIERJU0NMQUlNRVJcbiAqXG4gKiBEbyBub3QgZWRpdCBvciBhZGQgdG8gdGhpcyBmaWxlIGlmIHlvdSB3aXNoIHRvIHVwZ3JhZGUgUHJlc3RhU2hvcCB0byBuZXdlclxuICogdmVyc2lvbnMgaW4gdGhlIGZ1dHVyZS4gSWYgeW91IHdpc2ggdG8gY3VzdG9taXplIFByZXN0YVNob3AgZm9yIHlvdXJcbiAqIG5lZWRzIHBsZWFzZSByZWZlciB0byBodHRwOi8vd3d3LnByZXN0YXNob3AuY29tIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqICBAYXV0aG9yICAgIGNkaWdydXR0b2xhIDxjLmRpZ3J1dHRvbGFAaG90bWFpbC5pdD5cbiAqICBAY29weXJpZ2h0IENvcHlyaWdodCBzaW5jZSAyMDA3IENhcm1pbmUgRGkgR3J1dHRvbGFcbiAqICBAbGljZW5zZSAgIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9hZmwtMy4wLnBocCAgQWNhZGVtaWMgRnJlZSBMaWNlbnNlIChBRkwgMy4wKVxuICpcbiAqXG4gKi9cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHRvZ2dsZUN1c3RvbWVyVHlwZSgpO1xuXG4gICAgJCgnc2VsZWN0W25hbWU9aWRfYWRkcmVzc2N1c3RvbWVydHlwZV0nKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0b2dnbGVDdXN0b21lclR5cGUoKTtcbiAgICB9KTtcbn0pO1xuXG5mdW5jdGlvbiB0b2dnbGVDdXN0b21lclR5cGUoKSB7XG4gICAgdmFyIGNoayA9ICQoJ3NlbGVjdFtuYW1lPWlkX2FkZHJlc3NjdXN0b21lcnR5cGVdIG9wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xuXG4gICAgaWYgKHR5cGVvZiBjaGsgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBuZWVkX2ludm9pY2UgPSBmYWxzZTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBhamF4X2xpbmssXG4gICAgICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7QWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGNoa1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRfaW52b2ljZSA9IHJlc3VsdC5uZWVkX2ludm9pY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgb2JqX2ZpcnN0X25hbWUgPSAkKCdpbnB1dFtuYW1lPWZpcnN0bmFtZV0nKTtcbiAgICAgICAgdmFyIG9ial9sYXN0X25hbWUgPSAkKCdpbnB1dFtuYW1lPWxhc3RuYW1lXScpO1xuICAgICAgICB2YXIgb2JqX2NvbXBhbnkgPSAkKCdpbnB1dFtuYW1lPWNvbXBhbnldJyk7XG4gICAgICAgIHZhciBvYmpfdmF0X251bWJlciA9ICQoJ2lucHV0W25hbWU9dmF0X251bWJlcl0nKTtcblxuICAgICAgICB2YXIgb2JqX3NkaSA9ICQoJ2lucHV0W25hbWU9c2RpXScpO1xuICAgICAgICB2YXIgb2JqX3BlYyA9ICQoJ2lucHV0W25hbWU9cGVjXScpO1xuICAgICAgICB2YXIgb2JqX2RuaSA9ICQoJ2lucHV0W25hbWU9ZG5pXScpO1xuXG4gICAgICAgIGlmIChuZWVkX2ludm9pY2UpIHtcbiAgICAgICAgICAgIG9ial9maXJzdF9uYW1lLnByb3AoJ3JlcXVpcmVkJywgZmFsc2UpO1xuICAgICAgICAgICAgb2JqX2ZpcnN0X25hbWUuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5oaWRlKDEwMCk7XG4gICAgICAgICAgICBvYmpfbGFzdF9uYW1lLnByb3AoJ3JlcXVpcmVkJywgZmFsc2UpO1xuICAgICAgICAgICAgb2JqX2xhc3RfbmFtZS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmhpZGUoMTAwKTtcblxuICAgICAgICAgICAgb2JqX2NvbXBhbnkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5zaG93KDEwMCk7XG4gICAgICAgICAgICBvYmpfY29tcGFueS5wcm9wKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgICAgICAgaWYgKCFvYmpfY29tcGFueS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmZpbmQoJ2xhYmVsLmZvcm0tY29udHJvbC1sYWJlbCcpLmhhc0NsYXNzKCdyZXF1aXJlZCcpKSB7XG4gICAgICAgICAgICAgICAgb2JqX2NvbXBhbnkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCdsYWJlbC5mb3JtLWNvbnRyb2wtbGFiZWwnKS5hZGRDbGFzcygncmVxdWlyZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb2JqX2RuaS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmhpZGUoMTAwKTtcblxuICAgICAgICAgICAgb2JqX2NvbXBhbnkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCcuZm9ybS1jb250cm9sLWNvbW1lbnQnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIG9ial92YXRfbnVtYmVyLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuc2hvdygxMDApO1xuICAgICAgICAgICAgb2JqX3ZhdF9udW1iZXIucHJvcCgncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghb2JqX3ZhdF9udW1iZXIuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCdsYWJlbC5mb3JtLWNvbnRyb2wtbGFiZWwnKS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgIG9ial92YXRfbnVtYmVyLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmpfdmF0X251bWJlci5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmZpbmQoJy5mb3JtLWNvbnRyb2wtY29tbWVudCcpLmh0bWwoJycpO1xuICAgICAgICAgICAgb2JqX3NkaS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLnNob3coMTAwKTtcbiAgICAgICAgICAgIGlmIChzZGlfcmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBvYmpfc2RpLnByb3AoJ3JlcXVpcmVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmpfc2RpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykuaGFzQ2xhc3MoJ3JlcXVpcmVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqX3NkaS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmZpbmQoJ2xhYmVsLmZvcm0tY29udHJvbC1sYWJlbCcpLmFkZENsYXNzKCdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmpfc2RpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnLmZvcm0tY29udHJvbC1jb21tZW50JykuaHRtbCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmpfcGVjLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuc2hvdygxMDApO1xuICAgICAgICAgICAgaWYgKHBlY19yZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIG9ial9wZWMucHJvcCgncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9ial9wZWMuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCdsYWJlbC5mb3JtLWNvbnRyb2wtbGFiZWwnKS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmpfcGVjLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9ial9wZWMuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCcuZm9ybS1jb250cm9sLWNvbW1lbnQnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9ial9maXJzdF9uYW1lLnByb3AoJ3JlcXVpcmVkJywgdHJ1ZSk7XG4gICAgICAgICAgICBvYmpfZmlyc3RfbmFtZS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLnNob3coMTAwKTtcbiAgICAgICAgICAgIG9ial9sYXN0X25hbWUucHJvcCgncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIG9ial9sYXN0X25hbWUuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5zaG93KDEwMCk7XG5cbiAgICAgICAgICAgIG9ial9jb21wYW55LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuaGlkZSgxMDApO1xuICAgICAgICAgICAgb2JqX2NvbXBhbnkucHJvcCgncmVxdWlyZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAob2JqX2NvbXBhbnkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCdsYWJlbC5mb3JtLWNvbnRyb2wtbGFiZWwnKS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgIG9ial9jb21wYW55LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9ial9kbmkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5zaG93KDEwMCk7XG5cbiAgICAgICAgICAgIG9ial92YXRfbnVtYmVyLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuaGlkZSgxMDApO1xuICAgICAgICAgICAgb2JqX3ZhdF9udW1iZXIucHJvcCgncmVxdWlyZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAob2JqX3ZhdF9udW1iZXIuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5maW5kKCdsYWJlbC5mb3JtLWNvbnRyb2wtbGFiZWwnKS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgIG9ial92YXRfbnVtYmVyLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmpfc2RpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuaGlkZSgxMDApO1xuICAgICAgICAgICAgb2JqX3NkaS5wcm9wKCdyZXF1aXJlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChvYmpfc2RpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykuaGFzQ2xhc3MoJ3JlcXVpcmVkJykpIHtcbiAgICAgICAgICAgICAgICBvYmpfc2RpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmpfcGVjLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuaGlkZSgxMDApO1xuICAgICAgICAgICAgb2JqX3BlYy5wcm9wKCdyZXF1aXJlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChvYmpfcGVjLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykuaGFzQ2xhc3MoJ3JlcXVpcmVkJykpIHtcbiAgICAgICAgICAgICAgICBvYmpfcGVjLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuZmluZCgnbGFiZWwuZm9ybS1jb250cm9sLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9